{% extends "layout.html" %}
{% block title %}Inventory{% endblock %}
{% block content %}
<h2>Inventory List</h2>

<form class="mb-3" method="GET" action="{{ url_for('index') }}">
    <input type="text" name="q" value="{{ query or '' }}" class="form-control" placeholder="Search items...">
</form>

<form class="mb-4" method="POST">
    {{ form.hidden_tag() }}
    {{ form.name.label }} {{ form.name(class="form-control") }}
    {{ form.quantity.label }} {{ form.quantity(class="form-control") }}
    {{ form.category.label }} {{ form.category(class="form-control") }}
    <button class="btn btn-success  w-100">Add</button>
</form>

<div class="table-responsive">
	<table class="table table-bordered">
	    <thead class="table-dark">
		<tr>
		    <th>Name</th><th>Quantity</th><th>Category</th><th>Actions</th>
		</tr>
	    </thead>
	    <tbody>
		{% for item in inventory %}
		<tr>
		    <td>{{ item.name }}</td>
		    <td>
    			<input type="number"
           		class="form-control form-control-sm quantity-input"
           		value="{{ item.quantity }}"
           		data-id="{{ item.id }}"
           		style="width: 80px;" />
		    </td>
		    <td>{{ item.category }}</td>
		    <td>
		        <a class="btn btn-sm btn-primary" href="{{ url_for('edit', item_id=item.id) }}">Edit</a>
		        <a class="btn btn-sm btn-danger" href="{{ url_for('delete', item_id=item.id) }}">Delete</a>
		    </td>
		</tr>
		{% endfor %}
	    </tbody>
	</table>
</div>
<form method="POST" action="{{ url_for('snapshot') }}">
    {{ snapshot_form.hidden_tag() }}
    <button class="btn btn-warning mb-3">ðŸ“¦ Save Snapshot & Reset</button>
</form>

<form class="mt-3" action="{{ url_for('import_csv') }}" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="input-group">
        <input type="file" name="file" accept=".csv" class="form-control" required>
        <button class="btn btn-outline-primary">Import CSV</button>
    </div>
</form>

<a class="btn btn-outline-success mt-3" href="{{ url_for('export_csv') }}">Export CSV</a>
<!-- this is for register -->
<p class="mt-3">Don't have an account? <a href="{{ url_for('register') }}">Register here</a></p>
{% endblock %}

